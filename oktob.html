<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Oktob: Simple Writing Platform</title>
</head>

<body>
	{{> sAlert}}
	{{> topBar}} <!--TODO Fix sign-in alignment in mobile view-->
	{{> welcome}}

  
</body>
<template name="topNav"> <!--Moved to a separate template for the jquery plugin-->
<li><a href="/profile/{{id}}">Profile</a></li>
  <li><a href="#">Post</a>
  	<ul class="menu">
  		<li><a href="/new-story">New Story</a></li>
  		<li><a href="#">New Collection</a></li>
  	</ul>
  </li>
</template>

<template name="topBar"><div class="top-bar" data-topbar>
	<div class="top-bar-left">
		<ul class="dropdown menu" data-dropdown-menu>
			<li><a href="/">Home</a></li>
			{{#if currentUser}} 
  			{{> topNav}}
{{/if}}
		</ul>
	</div>
	<div class="top-bar-right"><div class="signin">
		
			<ul class="dropdown menu" data-dropdown-menu >
			
		<!--Login Buttons here-->
		<!--<button class="hollow button" href="#" data-open="loginForm">Sign In</button>-->
		<li>{{> loginButtons align="right"}}</li></ul></div>
	</div>
</div></template>


<template name="welcome">
	<div class="hero">
<div class="row">
	<div class="small-12 columns title"><p><h1 class="text-center">Oktob</h1></p></div>
	<div class="small-12 columns desc"><p class="text-center">It's time to tell your story.</p></div>
</div>
<div class="row align-center">

<div class="small-12 column"><ul class="topMenu">
<li><a class="hollow button small" href="/browse">BROWSE</a></li>
<li><a class="hollow button small" href="/faq">FAQ</a></li>
<li><a class="hollow button small" href="/contact">CONTACT</a></li>
</ul>

</div>
</div>
	</div>


</template>

<template name="homeList">
	{{#if currentUser}}
	{{profileWarning}}	
{{/if}}
<div class="row"><div class="small-12 columns"><h4>Recently Updated Stories:</h4></div></div>
{{#each homeStory}}
<div class="row">
	<div class="small-12 columns">
<div class="story">
	<div class="row">
		<div class="small-12 columns"><h5><a href="/story/{{_id}}">{{title}}</a><small class="author"><a href="/profile/{{author}}">&emsp;by {{authorName author}}</a></small></h5></div>
	</div>
	<div class="row">
		<div class="small-12 columns"><p>{{description}}</p></div>
	</div>
	<div class="row">
		<div class="small-12 columns"><span class="stats"><span class="stats-label">Genre:</span> {{genre}} / <span class="stats-label">Rating:</span> {{rating}} / <span class="stats-label">Word Count:</span> {{wordCount}} / <span class="stats-label">Chapters:</span> {{chapters}} / <span class="stats-label">Last Updated:</span> {{fromNow updateDate}} / <span class="stats-label">Published:</span> {{fromNow uploadDate}} / <span class="stats-label">Status:</span> {{status}} / <span class="stats-label">Likes:</span> {{likes}}</span></div>
	</div>
</div>
	</div>
</div>
{{/each}}

</template>

<template name="editProfile">
	{{#if currentUser}}
	<div class="row">
		<div class="small-12 columns"><h2>Edit Profile</h2></div>
	</div>
<form>
<div class="row">
	<div class="small-6 columns"><input type="text" name="realName" placeholder="Name" value="{{name}}"></div></div>

<div class="row"><div class="small-6 columns"><input type="text" name="dob" id="datepicker" placeholder="Date Of Birth" value="{{dob}}"></div></div>
<div class="row"><div class="small-6 columns"><textarea type="text" name="bio" placeholder="Tell us about yourself.." value="{{bio}}"></textarea></div></div>
<div class="row"><div class="small-12 columns"><input type="submit" class="hollow button" name="submitProfile"></div></div>


</form>
{{else}}
<div class="row"><div class="small-12 columns"><h2 class="text-center">Whoa there!</h2></div>
<div class="small-12 columns"><p class="text-center">Authorized personnel only! Sign in above to access this page.</p></div>
</div>
{{/if}}
</template>

<template name="submitStory">
	{{#if currentUser}}
	<div class="row">
		<div class="small-12 columns"><h2>Add New Story</h2></div>
	</div>
	<form>
	<div class="row">
		<div class="small-12 medium-6 columns"><input type="text" name="storytitle" placeholder="Title of the story"></div> </div>
		<div class="row"><div class="small-12 medium-6 columns"><input type="text" name="genre" placeholder="Genre of the story"></div></div>
		<div class="row"><div class="small-12 medium-6 columns"><select name="rating">
			<option value="" disabled selected>Rating</option>
		    <option value="G">General Audience</option>
		    <option value="T">Teen and Above</option>
		    <option value="R">Adult</option>
		    <option value="E">Explicit</option>
  </select></div></div>
		<div class="row"><div class="small-12 medium-6 columns"><textarea name="desc" id="descriptionBox" placeholder="Description" maxlength="500"></textarea></div></div>
		<div class="row"><div class="small-12 medium-6 columns"><p class="float-right" id="counter"></p></div></div>
		<div class="row"><div class="small-12 columns"><input type="submit" class="hollow button" name="submitStory"></div></div>

	</form>
	{{else}}
<div class="row"><div class="small-12 columns"><h2 class="text-center">Whoa there!</h2></div>
<div class="small-12 columns"><p class="text-center">Authorized personnel only! Sign in above to access this page.</p></div>
</div>
{{/if}}
	</template>

<template name="showStory">
	{{#if myProfile}}
		<div class="row settings">
			<div class="small-12 columns">
			<ul class="menu float-right">
				<li><a class="small hollow button" href="/story/{{_id}}/edit">Edit Story</a></li>
				<li><a class="small hollow button" href="/story/{{_id}}/new-chapter">Add Chapter</a></li>
				<li><a class="small hollow button" data-open="deleteConfirmation" name="deleteStory">Delete Story</a></li>

			</ul>
			</div>
		</div>
		<div class="tiny reveal" id="deleteConfirmation" data-reveal>
  		<h3>Are you sure?</h3>
  		<p>Once you delete this, you can't get it back.</p>
  		<a class="small hollow button" id="confirmDelete">YES, DELETE THIS!</a>
  <button class="close-button" data-close aria-label="Close reveal" type="button">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
	{{/if}}
		<div class="row">
			<div class="small-12 columns">
				<div class="story">
	<div class="row">
		<div class="small-12 columns">
			<h5>
				<a href="/story/{{_id}}">{{title}}</a>
				<small class="author"><a href="/profile/{{author}}">&emsp;by {{authorName}}</a></small>
			</h5>
		</div>
	</div>
	<div class="row">
		<div class="small-12 columns"><p>{{description}}</p></div>
	</div>
	<div class="row">
		<div class="small-12 columns"><span class="stats"><span class="stats-label">Genre:</span> {{genre}} / <span class="stats-label">Rating:</span> {{rating}} / <span class="stats-label">Word Count:</span> {{wordCount}} / <span class="stats-label">Chapters:</span> {{chapters}} / <span class="stats-label">Last Updated:</span> {{updateDate}} / <span class="stats-label">Published:</span> {{uploadDate}} / <span class="stats-label">Status:</span> {{status}} / <span class="stats-label">Likes:</span> {{likes}}</span></div>
	</div>
</div>
			</div>
		</div>
		{{#if hasChapters}}
		<div class="row">
			<div class="small-12 columns">
				<div class="story">
					{{#each chapter}}
						{{#if myProfile}}<div class="text-right"><h5>
						<ul class="menu float-right">
						<li><a href="/story/{{_id}}/{{number}}/edit" class="tiny hollow button">Edit Chapter</a></li>
					</ul></h5></div>{{/if}}
						<div class="chapter-title text-center"><p><b>CHAPTER {{number}}</b></p></div>
						{{#if hasNote number}}<div class="note"><b>Author's Note: </b>{{note}}</div>{{/if}}
						<div class="content">{{{content}}}</div>
						{{#if notLastChapter number}}<hr>{{else}} <a id="like-button">{{#if liked}}{{> selectedheart}} {{else}} {{> unselectedheart}} {{/if}}</a><span class="like-counter">{{likes}}{{likeCounter likes}}</span>{{/if}}
						
					{{/each}}
				</div>
			</div>
		</div>
		{{else}}
		<div class="row"><div class="small-12 columns text-center"><p>No chapters here yet :(</p></div></div>
		{{/if}}
</template>

<template name="addChapter">
	{{#if currentUser}}
	<div class="row">
		<div class="small-12 columns">
			<h2>Add New Chapter <small>to "{{title}}"</small></h2>
			<h6 class="tip">TIP: If the text editor hasn't loaded, refresh the page.</h6>
<form>
	<label>Note:
	<input type="text" name="note" placeholder="Note before chapter"></label>
	<label>Content of the chapter:<textarea name="chContent" placeholder="Content of chapter"></textarea></label>
	<input type="submit" class="hollow button chapterContent" name="submitChapter"><a href="/story/{{storyid}}" class="hollow button">Cancel</a>
</form>
		</div>
	</div>
{{else}}
<div class="row"><div class="small-12 columns"><h2 class="text-center">Whoa there!</h2></div>
<div class="small-12 columns"><p class="text-center">Authorized personnel only! Sign in above to access this page.</p></div>
</div>
{{/if}}
</template>
<template name="noPermission">
<div class="row"><div class="small-12 columns"><h2 class="text-center">Whoa there!</h2></div>
<div class="small-12 columns"><p class="text-center">Sorry, but you can't do that :(</p></div>
</div>
</template>
<template name="showProfile">
	<div class="row">
		<div class="small-12 columns"><h2>{{name}} <small class="profile-username">&#123;{{username}}&#125;</small>{{#if myProfile}}<a class="small hollow button float-right" href="/edit-profile">Edit Profile</a>{{/if}}</h2></div>
		<div class="small-12 columns"><p><b>Born:</b> {{dob}}.</p></div>
		<div class="small-12 columns"><p><b>About: </b> {{bio}}</p></div>
	</div>
	
	<hr>
	
		<div class="row">
		<div class="small-12 medium-6 columns">
			<h4>Published Stories:</h4>
			{{#if hasNotPublished}}<p>Looks like they haven't written anything yet :(</p>{{else}}
{{#each publishedStory}}
<div class="row">
	<div class="small-12 columns">
<div class="story">
	<div class="row">
		<div class="small-12 columns"><h5><a href="/story/{{_id}}">{{title}}</a></h5></div>
	</div>
	<div class="row">
		<div class="small-12 columns"><p>{{description}}</p></div>
	</div>
	<div class="row">
		<div class="small-12 columns"><span class="stats"><span class="stats-label">Genre:</span> {{genre}} / <span class="stats-label">Rating:</span> {{rating}} / <span class="stats-label">Word Count:</span> {{wordCount}} / <span class="stats-label">Chapters:</span> {{chapters}} / <span class="stats-label">Last Updated:</span> {{fromNow updateDate}} / <span class="stats-label">Published:</span> {{fromNow uploadDate}} / <span class="stats-label">Status:</span> {{status}} / <span class="stats-label">Likes:</span> {{likes}}</span></div>
	</div>
</div>
	</div>
</div>
{{/each}} {{/if}}</div> 

		<div class="small-12 medium-6 columns">
			<h4>{{> bigheart}} Liked:</h4>
			{{#if hasNotLiked}} <p>Oops, no likes from this one..</p>{{else}}
{{#each likedStory}}
<div class="row">
	<div class="small-12 columns">
<div class="story">
	<div class="row">
		<div class="small-12 columns"><h5><a href="/story/{{story}}">{{titleLiked story}}</a><small class="author"><a href="/profile/{{authorID story}}">&emsp;by {{authorName story}}</a></small></h5></div>
	</div>
	<div class="row">
		<div class="small-12 columns"><p>{{descriptionLiked story}}</p></div>
	</div>
	<div class="row">
		<div class="small-12 columns"><span class="stats"><span class="stats-label">Genre:</span> {{genreLiked story}} / <span class="stats-label">Rating:</span> {{ratingLiked story}} / <span class="stats-label">Word Count:</span> {{wordCountLiked story}} / <span class="stats-label">Chapters:</span> {{chaptersLiked story}} / <span class="stats-label">Last Updated:</span> {{updateDateLiked story}} / <span class="stats-label">Published:</span> {{uploadDateLiked story}} / <span class="stats-label">Status:</span> {{statusLiked story}} / <span class="stats-label">Likes:</span> {{likesLiked story}}</span></div>
	</div>
</div>
	</div>
</div>
{{/each}} {{/if}} </div> </div>
</template>

<template name="noProfile">
<div class="row"><div class="small-12 columns"><h2 class="text-center">Whoops..</h2></div>
<div class="small-12 columns"><p class="text-center">Looks like your profile isn't published yet. <a href="/edit-profile">Complete your profile so everyone can see it!</a></p></div>
</div>
</template>

<template name="notFound">
<div class="row"><div class="small-12 columns"><h2 class="text-center">Whoops..</h2></div>
<div class="small-12 columns"><p class="text-center">There's nothing here.</p></div>
</div>
</template>

<template name="selectedheart">

<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="1em" height="1em" viewBox="0 0 441.344 441.344" stroke="black" style="enable-background:new 0 0 441.344 441.344;"
	 xml:space="preserve">
<g>
	<path class="heart-icon liked" d="M314.016,17.679c-36.879,0-70.09,16.419-93.344,42.648c-23.252-26.229-56.465-42.648-93.344-42.648
		C57.008,17.679,0,77.354,0,150.969c0,19.779,3.338,38.813,9.184,56.989c0,0,5.301,16.4,9.997,25.428
		c53.671,115.428,201.491,190.279,201.491,190.279s147.82-74.852,201.491-190.279c0,0,6.925-15.38,9.997-25.428
		c5.582-18.26,9.184-37.21,9.184-56.989C441.344,77.354,384.336,17.679,314.016,17.679z"/>
</g>
</svg>

</template>
<template name="unselectedheart">

<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="1em" height="1em" viewBox="0 0 441.344 441.344" stroke="black" style="enable-background:new 0 0 441.344 441.344;"
	 xml:space="preserve">
<g>
	<path class="heart-icon not-liked" d="M314.016,17.679c-36.879,0-70.09,16.419-93.344,42.648c-23.252-26.229-56.465-42.648-93.344-42.648
		C57.008,17.679,0,77.354,0,150.969c0,19.779,3.338,38.813,9.184,56.989c0,0,5.301,16.4,9.997,25.428
		c53.671,115.428,201.491,190.279,201.491,190.279s147.82-74.852,201.491-190.279c0,0,6.925-15.38,9.997-25.428
		c5.582-18.26,9.184-37.21,9.184-56.989C441.344,77.354,384.336,17.679,314.016,17.679z"/>
</g>
</svg>

</template>
<template name="bigheart">

<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="1em" height="1em" viewBox="0 0 441.344 441.344" stroke="black" style="enable-background:new 0 0 441.344 441.344;"
	 xml:space="preserve">
<g>
	<path class="heart-icon liked" d="M314.016,17.679c-36.879,0-70.09,16.419-93.344,42.648c-23.252-26.229-56.465-42.648-93.344-42.648
		C57.008,17.679,0,77.354,0,150.969c0,19.779,3.338,38.813,9.184,56.989c0,0,5.301,16.4,9.997,25.428
		c53.671,115.428,201.491,190.279,201.491,190.279s147.82-74.852,201.491-190.279c0,0,6.925-15.38,9.997-25.428
		c5.582-18.26,9.184-37.21,9.184-56.989C441.344,77.354,384.336,17.679,314.016,17.679z"/>
</g>
</svg>

</template>

<template name="editStory">
{{#if currentUser}}
	<div class="row">
		<div class="small-12 columns"><h2>Edit <small>"{{title}}"</small></h2></div>
	</div>
	<form>
	<div class="row">
		<div class="small-12 medium-6 columns"><input type="text" name="storytitle" placeholder="Title of the story" value="{{title}}"></div> </div>
		<div class="row"><div class="small-12 medium-6 columns"><input type="text" name="genre" placeholder="Genre of the story" value="{{genre}}"></div></div>
		<div class="row"><div class="small-12 medium-6 columns"><select id="rating" name="rating">
			<option value="" disabled selected>Rating</option>
		    <option value="G">General Audience</option>
		    <option value="T">Teen and Above</option>
		    <option value="R">Adult</option>
		    <option value="E">Explicit</option>
  </select></div></div>
		<div class="row"><div class="small-12 medium-6 columns"><textarea name="desc" id="descriptionBox" placeholder="Description" maxlength="500" value="{{description}}"></textarea></div></div>
		<div class="row"><div class="small-12 medium-6 columns"><p class="float-right" id="counter"></p></div></div>
		<div class="row"><div class="small-12 columns"><input type="submit" class="hollow button" name="submitStory"></div></div>

	</form>
	{{else}}
<div class="row"><div class="small-12 columns"><h2 class="text-center">Whoa there!</h2></div>
<div class="small-12 columns"><p class="text-center">Authorized personnel only! Sign in above to access this page.</p></div>
</div>
{{/if}}
	</template>

	<template name="editChapter">
		{{#if currentUser}}
	<div class="row">
		<div class="small-12 columns">
			<h2>Edit Chapter</h2>
			<h6 class="tip">TIP: If the text editor hasn't loaded, refresh the page.</h6>
<form>
	<label>Note:
	<input type="text" name="note" placeholder="Note before chapter" value="{{note}}"></label>
	<label>Content of the chapter:<textarea name="chContent" placeholder="Content of chapter">{{{content}}}</textarea></label>
	<input type="submit" class="hollow button chapterContent" name="submitChapter"><a href="/story/{{storyid}}" class="hollow button">Cancel</a><a data-open="chDeleteConfirmation" class="hollow button">Delete Chapter</a>
</form>
		</div>
	</div>
	<div class="tiny reveal" id="chDeleteConfirmation" data-reveal>
  		<h3>Are you sure?</h3>
  		<p>Once you delete this, you can't get it back.</p>
  		<a class="small hollow button" id="chConfirmDelete">YES, DELETE THIS!</a>
  <button class="close-button" data-close aria-label="Close reveal" type="button">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
{{else}}
<div class="row"><div class="small-12 columns"><h2 class="text-center">Whoa there!</h2></div>
<div class="small-12 columns"><p class="text-center">Authorized personnel only! Sign in above to access this page.</p></div>
</div>
{{/if}}
	</template>



